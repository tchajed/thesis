\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1,codes={\catcode`\$=3\catcode`\^=7\catcode`\_=8},fontsize=\small,numbersep=6pt,xleftmargin=0.2in]
\PY{c+c1}{// Install 1 bit from src into dst, at offset bit. return new dst.}
\PY{k+kd}{func} \PY{n+nx}{installOneBit}\PY{p}{(}\PY{n+nx}{src} \PY{k+kt}{byte}\PY{p}{,} \PY{n+nx}{dst} \PY{k+kt}{byte}\PY{p}{,} \PY{n+nx}{bit} \PY{k+kt}{uint64}\PY{p}{)} \PY{k+kt}{byte} \PY{p}{\PYZob{}}
  \PY{k+kd}{var} \PY{n+nx}{new} \PY{k+kt}{byte} \PY{p}{=} \PY{n+nx}{dst}
  \PY{k}{if} \PY{n+nx}{src}\PY{o}{\PYZam{}}\PY{p}{(}\PY{l+m+mi}{1}\PY{o}{\PYZlt{}\PYZlt{}}\PY{n+nx}{bit}\PY{p}{)} \PY{o}{!=} \PY{n+nx}{dst}\PY{o}{\PYZam{}}\PY{p}{(}\PY{l+m+mi}{1}\PY{o}{\PYZlt{}\PYZlt{}}\PY{n+nx}{bit}\PY{p}{)} \PY{p}{\PYZob{}}
    \PY{k}{if} \PY{n+nx}{src}\PY{o}{\PYZam{}}\PY{p}{(}\PY{l+m+mi}{1}\PY{o}{\PYZlt{}\PYZlt{}}\PY{n+nx}{bit}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0} \PY{p}{\PYZob{}}
      \PY{c+c1}{// dst is 1, but should be 0}
      \PY{n+nx}{new} \PY{p}{=} \PY{n+nx}{new} \PY{o}{\PYZam{}} \PY{p}{\PYZca{}}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZlt{}\PYZlt{}} \PY{n+nx}{bit}\PY{p}{)}
    \PY{p}{\PYZcb{}} \PY{k}{else} \PY{p}{\PYZob{}}
      \PY{c+c1}{// dst is 0, but should be 1}
      \PY{n+nx}{new} \PY{p}{=} \PY{n+nx}{new} \PY{p}{|} \PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZlt{}\PYZlt{}} \PY{n+nx}{bit}\PY{p}{)}
    \PY{p}{\PYZcb{}}
  \PY{p}{\PYZcb{}}
  \PY{k}{return} \PY{n+nx}{new}
\PY{p}{\PYZcb{}}
\end{Verbatim}
